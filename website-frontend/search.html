<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar</title>
    <script src="./scripts/login.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./styles/search.css">

    
    <script>
        function mostrarMensaje() {
            var selectElement = document.getElementById("opciones");
            var inputElement = document.getElementById("campo-entrada");
            var mensajeElement = document.getElementById("mensaje");
            var mensajeAntesElement = document.getElementById("mensaje-antes");
            var botonElement = document.getElementById("boton");
            var seleccion = selectElement.value;

            if (seleccion === "") {
                inputElement.style.display = "none";
                mensajeElement.style.display = "none";
                mensajeAntesElement.style.display = "none";
                botonElement.style.display = "none";
            } else {
                inputElement.style.display = "block";
                mensajeElement.style.display = "block";
                mensajeAntesElement.style.display = "block";
                botonElement.style.display = "block";

                if (seleccion === "cancha") {
                    inputElement.placeholder = "Código postal";
                    mensajeElement.innerHTML = "Si no sabes tu código postal puedes entrar a <a href='http://www.codigopostal.gob.pe/pages/invitado/consulta.jsf'>CÓDIGO POSTAL NACIONAL</a>";
                    mensajeAntesElement.innerHTML = "Ingresa Código postal";
                    inputElement.pattern = "\\d+";
                } else if (seleccion === "usuario") {
                    inputElement.placeholder = "Nombre de usuario";
                    mensajeElement.innerHTML = "Asegúrate de ingresar correctamente el nombre de usuario";
                    mensajeAntesElement.innerHTML = "Ingresa el nombre de usuario";
                    inputElement.pattern = "[A-Za-z0-9]+";
                }
            }
        }

        function validarFormulario() {
            var inputElement = document.getElementById("campo-entrada");
            if (!inputElement.checkValidity()) {
                return false;
            }
            var formElement = document.getElementById("form-busqueda");
            var seleccion = document.getElementById("opciones").value;
            if (seleccion === "cancha") {
                formElement.action = "resultsCancha.html?codigo=" + inputElement.value;
            } else if (seleccion === "usuario") {
                formElement.action = "resultsUser.html?usuario=" + inputElement.value;
            }
            return true;
        }
    </script>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="../website-frontend/images/logo.png" alt="logo">
                    <span>CHAPA TU MANCHA</span>
                </a>
                <div class="subheader">
                    <a href="userProfile.html">PERFIL</a>
                    <a href="search.html">BUSCAR</a>
                    <a href="reserva.html">RESERVAS</a>
                    <a href="index.html">SOPORTE</a>
                </div>
            </div>
        </nav>
    </header>

    <div class="container mt-5">
        <div class="d-flex justify-content-between full-height">
            <h1>Búsqueda</h1>
        </div>
        <h2>Seleccione una opción</h2>
        <form id="form-busqueda" onsubmit="return validarFormulario()">
            <select id="opciones" onchange="mostrarMensaje()">
                <option value="">Seleccionar</option>
                <option value="cancha">Cancha</option>
                <option value="usuario">Usuario</option>
            </select>
            <h2 id="mensaje-antes" style="display: none;"></h2>
            <input type="text" id="campo-entrada" style="display: none;" required>
            <p id="mensaje" style="display: none;"></p>
            <button id="boton" type="submit" style="display: none;">Buscar</button>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
</html>
